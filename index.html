<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ПланПомещений - Конструктор помещений и расчет стоимости ремонта в Симферополе</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div>
                    <h1>ПланПомещений</h1>
                    <p class="tagline">Конструктор помещений и расчет стоимости ремонта</p>
                    <div class="location-badge">
                        <i class="fas fa-map-marker-alt"></i> Все работы производятся в Симферополе
                    </div>
                </div>
            </div>
        </header>

        <div class="app-container">
            <div class="panel tools-panel">
                <div class="panel-header">
                    <i class="fas fa-tools"></i>
                    <span>Инструменты</span>
                </div>
                <div class="panel-content">
                    <div class="tool-group">
                        <h3><i class="fas fa-sliders-h"></i> Основные инструменты</h3>
                        <div class="tool-buttons">
                            <div class="tool-btn active" data-tool="select">
                                <i class="fas fa-mouse-pointer"></i>
                                <span>Выбор и перемещение</span>
                            </div>
                            <div class="tool-btn" data-tool="room">
                                <i class="fas fa-vector-square"></i>
                                <span>Добавить комнату</span>
                            </div>
                        </div>
                    </div>
                    <div class="tool-group">
                        <h3><i class="fas fa-door-closed"></i> Элементы комнаты</h3>
                        <div class="tool-buttons">
                            <div class="tool-btn" data-tool="window">
                                <i class="fas fa-square"></i>
                                <span>Добавить окно</span>
                            </div>
                            <div class="tool-btn" data-tool="door">
                                <i class="fas fa-door-open"></i>
                                <span>Добавить дверь</span>
                            </div>
                        </div>
                    </div>
                    <div class="tool-group">
                        <h3><i class="fas fa-ruler-combined"></i> Параметры проекта</h3>
                        <div class="form-group">
                            <label for="ceilingHeight">Высота потолков (м):</label>
                            <input type="number" id="ceilingHeight" min="2.0" max="5.0" step="0.1" value="2.5">
                            <div class="help-text">Стандартная высота потолков 2.5-2.7 м</div>
                        </div>
                    </div>
                    <div class="tool-group">
                        <h3><i class="fas fa-list-ul"></i> Элементы проекта</h3>
                        <div class="element-list" id="elementList">
                            <!-- Элементы будут добавляться здесь -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel editor-panel">
                <div class="panel-header">
                    <i class="fas fa-edit"></i>
                    <span>Планировка помещения</span>
                </div>
                <div class="panel-content">
                    <div class="editor-toolbar">
                        <button id="newProject"><i class="fas fa-file"></i> Новый проект</button>
                        <button id="clearAll"><i class="fas fa-trash"></i> Очистить все</button>
                        <div class="zoom-controls">
                            <button id="zoomOut"><i class="fas fa-search-minus"></i></button>
                            <span id="zoomLevel">100%</span>
                            <button id="zoomIn"><i class="fas fa-search-plus"></i></button>
                            <button id="centerView"><i class="fas fa-crosshairs"></i></button>
                        </div>
                    </div>
                    <div class="editor-container">
                        <canvas id="editorCanvas"></canvas>
                        <div id="canvasFallback" class="canvas-not-supported" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i> Canvas не поддерживается вашим браузером. Пожалуйста, обновите браузер.
                        </div>
                    </div>
                    <div class="status-bar">
                        <div id="cursorPosition">X: 0, Y: 0</div>
                        <div id="selectedElement">Не выбран</div>
                        <div>Масштаб: 1м = 50px</div>
                    </div>
                </div>
            </div>
            <div class="panel properties-panel">
                <div class="panel-header">
                    <i class="fas fa-cog"></i>
                    <span>Свойства и расчеты</span>
                </div>
                <div class="panel-content">
                    <div class="property-group" id="roomProperties" style="display: none;">
                        <h3><i class="fas fa-door-open"></i> Свойства комнаты</h3>
                        <div class="form-group">
                            <label for="roomName">Название:</label>
                            <input type="text" id="roomName" value="Комната">
                        </div>
                        <div class="form-group">
                            <label for="roomWidth">Ширина (м):</label>
                            <input type="number" id="roomWidth" min="1.0" max="20.0" step="0.1" value="4.0">
                        </div>
                        <div class="form-group">
                            <label for="roomHeightProp">Длина (м):</label>
                            <input type="number" id="roomHeightProp" min="1.0" max="20.0" step="0.1" value="3.0">
                        </div>
                        <div class="form-group">
                            <label>Отделка стен:</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="plaster" checked>
                                    <label for="plaster">Стартовая штукатурка</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="armoring">
                                    <label for="armoring">Армирование сеткой</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="puttyWallpaper">
                                    <label for="puttyWallpaper">Шпаклевка (под обои)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="puttyPaint">
                                    <label for="puttyPaint">Шпаклевка (под покраску)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="painting">
                                    <label for="painting">Покраска</label>
                                </div>
                            </div>
                        </div>
                        <button id="applyRoomChanges" disabled><i class="fas fa-check"></i> Применить изменения</button>
                        <div class="divider"></div>
                        <button class="btn-danger" id="deleteRoom"><i class="fas fa-trash"></i> Удалить комнату</button>
                    </div>
                    <div class="property-group" id="windowProperties" style="display: none;">
                        <h3><i class="fas fa-square"></i> Свойства окна</h3>
                        <div class="form-group">
                            <label for="windowWidth">Ширина (м):</label>
                            <input type="number" id="windowWidth" min="0.5" max="3.0" step="0.1" value="1.2">
                        </div>
                        <div class="form-group">
                            <label for="windowHeight">Высота (м):</label>
                            <input type="number" id="windowHeight" min="0.5" max="3.0" step="0.1" value="1.5">
                        </div>
                        <div class="form-group">
                            <label for="windowWall">Стена:</label>
                            <select id="windowWall">
                                <option value="top">Верхняя</option>
                                <option value="right">Правая</option>
                                <option value="bottom">Нижняя</option>
                                <option value="left">Левая</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="windowPosition">Позиция на стене:</label>
                            <input type="range" id="windowPosition" min="0" max="100" value="50">
                            <div style="display: flex; justify-content: space-between;">
                                <span>0%</span>
                                <span id="windowPositionValue">50%</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="windowSlopes">Откосы:</label>
                            <select id="windowSlopes">
                                <option value="with">С откосами</option>
                                <option value="with_net">С откосами и сеткой</option>
                                <option value="without">Без откосов</option>
                            </select>
                        </div>
                        <button id="applyWindowChanges" disabled><i class="fas fa-check"></i> Применить изменения</button>
                        <div class="divider"></div>
                        <button class="btn-danger" id="deleteWindow"><i class="fas fa-trash"></i> Удалить окно</button>
                    </div>
                    <div class="property-group" id="doorProperties" style="display: none;">
                        <h3><i class="fas fa-door-open"></i> Свойства двери</h3>
                        <div class="form-group">
                            <label for="doorWidth">Ширина (м):</label>
                            <input type="number" id="doorWidth" min="0.5" max="2.0" step="0.1" value="0.9">
                        </div>
                        <div class="form-group">
                            <label for="doorHeight">Высота (м):</label>
                            <input type="number" id="doorHeight" min="1.5" max="3.0" step="0.1" value="2.1">
                        </div>
                        <div class="form-group">
                            <label for="doorWall">Стена:</label>
                            <select id="doorWall">
                                <option value="top">Верхняя</option>
                                <option value="right">Правая</option>
                                <option value="bottom">Нижняя</option>
                                <option value="left">Левая</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="doorPosition">Позиция на стене:</label>
                            <input type="range" id="doorPosition" min="0" max="100" value="50">
                            <div style="display: flex; justify-content: space-between;">
                                <span>0%</span>
                                <span id="doorPositionValue">50%</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="doorSlopes">Откосы:</label>
                            <select id="doorSlopes">
                                <option value="with">С откосами</option>
                                <option value="with_net">С откосами и сеткой</option>
                                <option value="without">Без откосов</option>
                            </select>
                        </div>
                        <button id="applyDoorChanges" disabled><i class="fas fa-check"></i> Применить изменения</button>
                        <div class="divider"></div>
                        <button class="btn-danger" id="deleteDoor"><i class="fas fa-trash"></i> Удалить дверь</button>
                    </div>
                    <div class="property-group" id="projectProperties">
                        <h3><i class="fas fa-chart-pie"></i> Сводка проекта</h3>
                        <div class="summary" id="projectSummary">
                            <div class="summary-item">
                                <span>Комнат:</span>
                                <span id="roomsCount">0</span>
                            </div>
                            <div class="summary-item">
                                <span>Окон:</span>
                                <span id="windowsCount">0</span>
                            </div>
                            <div class="summary-item">
                                <span>Дверей:</span>
                                <span id="doorsCount">0</span>
                            </div>
                            <div class="summary-item">
                                <span>Общая площадь стен:</span>
                                <span id="totalArea">0 м²</span>
                            </div>
                        </div>
                    </div>
                    <div class="property-group" id="costEstimate">
                        <h3><i class="fas fa-calculator"></i> Смета работ</h3>
                        <div id="estimateResults">
                            <!-- Результаты расчета будут здесь -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Детальная смета в виде кассового чека -->
        <div class="receipt-container" id="receiptContainer" style="display: none;">
            <div class="receipt-header">
                <h2>Детальная смета работ</h2>
                <p>Расчет стоимости отделочных работ в Симферополе</p>
            </div>
            <div class="receipt-content" id="receiptContent">
                <!-- Содержимое чека будет сгенерировано JavaScript -->
            </div>
            <div class="receipt-actions" id="receiptActions" style="display: none;">
                <div class="sharing-buttons">
                    <button id="sendWhatsApp" class="btn-whatsapp">
                        <i class="fab fa-whatsapp"></i> Отправить в WhatsApp
                    </button>
                    <button id="copyReceipt" class="btn-copy">
                        <i class="fas fa-copy"></i> Копировать смету
                    </button>
                    <button id="printReceipt" class="btn-print">
                        <i class="fas fa-print"></i> Распечатать смету
                    </button>
                </div>
            </div>
        </div>

        <!-- Кнопка обратной связи -->
        <div class="feedback-section">
            <button id="feedbackBtn" class="btn-feedback">
                <i class="fas fa-comments"></i> Получить консультацию специалиста
            </button>
            <p class="feedback-note">
                <strong>Внимание!</strong> Данная смета является информационной. 
                Для получения консультации специалиста оставьте заявку.
            </p>
        </div>
    </div>

    <!-- Модальное окно обратной связи -->
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Получить консультацию специалиста</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="info-notice">
                    <i class="fas fa-info-circle"></i>
                    <p>Смета является информационной. Итоговая стоимость может отличаться в зависимости от конкретных условий работ.</p>
                </div>

                <form id="feedbackForm">
                    <div class="form-group">
                        <label for="clientName">Ваше имя *</label>
                        <input type="text" id="clientName" name="clientName" required placeholder="Иван Иванов">
                    </div>

                    <div class="form-group">
                        <label for="clientContact">Контактные данные *</label>
                        <input type="text" id="clientContact" name="clientContact" required placeholder="Телеграм @username или номер телефона">
                        <div class="help-text">Укажите Telegram или номер телефона для связи</div>
                    </div>

                    <div class="form-group">
                        <label for="propertyType">Тип помещения *</label>
                        <select id="propertyType" name="propertyType" required>
                            <option value="">Выберите тип помещения</option>
                            <option value="Квартира">Квартира</option>
                            <option value="Частный дом">Частный дом</option>
                            <option value="Коммерческое помещение">Коммерческое помещение</option>
                            <option value="Жилое помещение">Жилое помещение</option>
                            <option value="Нежилое помещение">Нежилое помещение</option>
                            <option value="Другое">Другое</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="totalArea">Общая площадь помещения (м²)</label>
                        <input type="number" id="totalAreaInput" name="totalArea" min="1" max="1000" placeholder="Например: 65">
                    </div>

                    <div class="form-group">
                        <label for="additionalInfo">Дополнительная информация</label>
                        <textarea id="additionalInfo" name="additionalInfo" rows="4" placeholder="Особенности помещения, пожелания по срокам, дополнительные работы..."></textarea>
                    </div>

                    <div class="form-group checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                            <label for="agreeTerms">Я согласен на обработку персональных данных и получение обратной связи</label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-submit">
                            <i class="fas fa-paper-plane"></i> Отправить заявку
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Уведомление -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Изменения сохранены</span>
    </div>
    
    <script src="js/app.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/elements.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>